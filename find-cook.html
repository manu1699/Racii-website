<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RACII ‚Äî Find a Cook</title>
<script src="js/auth.js"></script>
<script>requireClient();</script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
body {
    font-family:'Poppins',sans-serif;
    margin:0;
    background:#e0e0e0;
    color:#4a352c;
    max-width: 100%;
    overflow-x: hidden;
}

/* Header */
header nav {
    display:flex;
    justify-content:flex-start; /* changed from space-between */
    align-items:center;
    padding:16px 32px;
    background: rgba(128,128,128,0.5);
    position:fixed;
    width:100%;
    top:0;
    z-index:100;
    border-bottom:1px solid #ddd;
    gap:20px; /* spacing between logo and home */
}

nav a {
    text-decoration:none;
    color:#4a352c;
    font-weight:500;
}

/* Container */
.container {
    max-width:1200px;
    margin:120px auto 32px;
    padding:16px;
    width:100%;
    box-sizing:border-box;
    display:flex;
    flex-direction:column;
    align-items:center;
}

h2 {
    text-align:center;
    margin-bottom:24px;
}

/* Cook Grid */
.cook-grid {
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
    gap:18px;
    width:100%;
    justify-items:center;
}

.cook-card {
    background: rgba(255,255,255,0.9);
    border-radius:16px;
    padding:16px;
    box-shadow:0 8px 24px rgba(0,0,0,0.08);
    display:flex;
    flex-direction:column;
    cursor:pointer;
    transition: transform 220ms ease, box-shadow 220ms ease;
    max-width:300px;
    width:100%;
}

.cook-card:hover {
    transform:translateY(-6px);
    box-shadow:0 18px 36px rgba(0,0,0,0.12);
}

.cook-card img {
    width:100%;
    border-radius:12px;
    height:180px;
    object-fit:cover;
    margin-bottom:12px;
}

.cook-name { font-weight:700; margin-bottom:4px; font-size:1.1rem; }
.cook-nation { font-size:0.95rem; color:#7a6e65; margin-bottom:8px; }
.cook-bio { font-size:0.95rem; color:#2b2b2b; margin-bottom:12px; flex:1; }

.btn {
    padding:10px 20px;
    border:none;
    border-radius:12px;
    cursor:pointer;
    font-weight:500;
    transition:0.25s;
    text-decoration:none;
    text-align:center;
}

.btn-primary { background:#ff7f50; color:#fff; }
.btn-primary:hover { background:#e56b3e; }

/* Modal */
.modal {
    display:none;
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.6);
    justify-content:center;
    align-items:center;
    z-index:1000;
}

.modal-content {
    background:#fff;
    border-radius:16px;
    max-width:700px;
    width:90%;
    padding:24px;
    position:relative;
    max-height:90vh;
    overflow-y:auto;
    box-shadow:0 16px 36px rgba(0,0,0,0.2);
}

.modal-content h3 { margin-top:0; }
.close-btn { position:absolute; top:16px; right:16px; font-size:1.5rem; cursor:pointer; }

.image-gallery {
    display:flex;
    gap:12px;
    overflow-x:auto;
    margin-bottom:12px;
}

.image-gallery img {
    width:120px;
    height:100px;
    object-fit:cover;
    border-radius:10px;
    flex-shrink:0;
    cursor:pointer;
    transition: transform 0.2s;
}

.image-gallery img:hover { transform:scale(1.1); }

/* ---------------- MOBILE FIXES ---------------- */
@media (max-width: 768px) {
    header nav {
        flex-direction: column;
        align-items: center;
        gap: 8px;
        padding: 12px 16px;
    }

    header nav a {
        margin: 4px 0;
        text-align: center;
        width: 100%;
    }

    .container {
        margin-top: 150px;
        padding-left: 12px;
        padding-right: 12px;
    }

    .cook-card img {
        height:150px;
    }
}
</style>
</head>
<body>

<header>
  <nav>
    <div class="logo">üç≥ RACII</div>
    <a href="index.html">Home</a>
  </nav>
</header>

<div class="container">
  <h2>Find a Cook Near You</h2>
  <div id="cook-grid" class="cook-grid"></div>
</div>

<!-- Modal -->
<div id="cook-modal" class="modal">
  <div class="modal-content">
    <span class="close-btn">&times;</span>
    <h3 id="modal-name"></h3>
    <p id="modal-nation"></p>
    <p id="modal-bio"></p>
    <h4>Kitchen Photos</h4>
    <div id="kitchen-gallery" class="image-gallery"></div>
    <h4>Dish Photos</h4>
    <div id="dish-gallery" class="image-gallery"></div>
    <button id="book-btn-modal" class="btn btn-primary">Book a Meal</button>
  </div>
</div>

<script>
// SAMPLE cooks
if(!localStorage.getItem('cooks') || JSON.parse(localStorage.getItem('cooks')).length===0){
  const sampleCooks = [
    {
      id:1,
      name:"Maria Rossi",
      nationality:"Italy",
      region:"Lombardy",
      city:"Milan",
      bio:"Homemade Pasta & Tiramisu",
      kitchenPhotos:["https://images.unsplash.com/photo-1528715471579-d1bcf0ba5e83?auto=format&fit=crop&w=800&q=80"],
      dishPhotos:["https://images.unsplash.com/photo-1604908177266-2f06c3a20a8a?auto=format&fit=crop&w=800&q=80"]
    },
    {
      id:2,
      name:"Arjun Mehta",
      nationality:"India",
      region:"Maharashtra",
      city:"Mumbai",
      bio:"Butter Chicken & Paneer Dishes",
      kitchenPhotos:["https://images.unsplash.com/photo-1556910103-1c02745aae4d?auto=format&fit=crop&w=800&q=80"],
      dishPhotos:["https://images.unsplash.com/photo-1562967916-eb82221dfb36?auto=format&fit=crop&w=800&q=80"]
    }
  ];
  localStorage.setItem('cooks', JSON.stringify(sampleCooks));
}

// DOM
const cooks = JSON.parse(localStorage.getItem('cooks'));
const cookGrid = document.getElementById('cook-grid');
const modal = document.getElementById('cook-modal');
const modalName = document.getElementById('modal-name');
const modalNation = document.getElementById('modal-nation');
const modalBio = document.getElementById('modal-bio');
const kitchenGallery = document.getElementById('kitchen-gallery');
const dishGallery = document.getElementById('dish-gallery');
const closeBtn = document.querySelector('.close-btn');
const bookBtnModal = document.getElementById('book-btn-modal');

// Render cooks
function renderCooks() {
  cookGrid.innerHTML = '';
  cooks.forEach(cook => {
    const card = document.createElement('div');
    card.className = 'cook-card';
    card.innerHTML = `
      <img src="${cook.dishPhotos[0]}" alt="Dish">
      <div class="cook-name">${cook.name}</div>
      <div class="cook-nation">${cook.nationality}</div>
      <div class="cook-bio">${cook.bio}</div>
      <button class="btn btn-primary book-btn">Book a Meal</button>
    `;

    card.querySelector('.book-btn').addEventListener('click', () => {
      modal.style.display='flex';
      modalName.textContent = cook.name;
      modalNation.textContent = cook.nationality;
      modalBio.textContent = cook.bio;

      kitchenGallery.innerHTML='';
      cook.kitchenPhotos.forEach(photo=>{
        const img=document.createElement('img');
        img.src=photo;
        kitchenGallery.appendChild(img);
      });

      dishGallery.innerHTML='';
      cook.dishPhotos.forEach(photo=>{
        const img=document.createElement('img');
        img.src=photo;
        dishGallery.appendChild(img);
      });
    });

    cookGrid.appendChild(card);
  });
}

// Close modal
closeBtn.addEventListener('click', ()=> modal.style.display='none');
window.addEventListener('click', e => { if(e.target==modal) modal.style.display='none'; });

bookBtnModal.addEventListener('click', ()=>{
    localStorage.setItem('selectedCook', JSON.stringify({
        name: modalName.textContent,
        nationality: modalNation.textContent
    }));
    window.location.href = 'book-meal.html';
});

// Start
renderCooks();
</script>

</body>
</html>
