<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RACII ‚Äî Cook Profile</title>
<style>
:root {
  --accent:#ff6b6b;
  --accent-dark:#e05555;
  --muted:#555;
}

/* General */
*, *::before, *::after { box-sizing:border-box; }
body { 
  margin:0; 
  font-family:'Poppins',sans-serif; 
  background:#f2f2f2; 
  color:#000; 
  display:flex; 
  flex-direction:column; 
  align-items:center;
}

/* Header */
.header { 
  background:rgba(255,255,255,0.95); 
  padding:12px 16px; 
  box-shadow:0 2px 6px rgba(0,0,0,0.1); 
  width:100%; 
  max-width:100%; 
  position:fixed; 
  top:0; 
  z-index:100; 
  display:flex; 
  flex-wrap:wrap; 
  justify-content:space-between; 
  align-items:center; 
}

.header .logo { font-size:1.5rem; font-weight:700; }
.nav-links { display:flex; flex-wrap:wrap; gap:12px; }
.nav-links a { text-decoration:none; color:#000; font-weight:600; padding:4px 8px; border-radius:6px; }
.nav-links a:hover { color:var(--accent); background:rgba(255,107,107,0.1); }

/* Profile container */
.profile-container { 
  width:100%; 
  max-width:900px; 
  margin:120px auto 60px auto; 
  padding:0 16px; 
  display:flex; 
  flex-direction:column; 
  align-items:center;
}

/* Profile header */
.profile-header { 
  display:flex; 
  flex-direction:column; 
  align-items:center; 
  gap:16px; 
  width:100%; 
  margin-bottom:24px; 
  background:#fff; 
  padding:16px; 
  border-radius:12px; 
  box-shadow:0 4px 12px rgba(0,0,0,0.08); 
}

.profile-header img { 
  width:150px; 
  height:150px; 
  border-radius:12px; 
  object-fit:cover; 
  cursor:pointer; 
  border:2px solid var(--accent); 
}

.profile-info { 
  width:100%; 
  display:flex; 
  flex-direction:column; 
  align-items:center; 
}

.profile-info input, .profile-info textarea { 
  width:100%; 
  max-width:400px; 
  padding:8px; 
  margin:6px 0; 
  border-radius:8px; 
  border:1px solid #ccc; 
  font-family:Poppins; 
  font-size:0.95rem; 
}

.profile-info textarea { resize:vertical; min-height:60px; }

/* Buttons */
.btn-book, .btn-save, .btn-add-photo { 
  background:var(--accent); 
  color:#fff; 
  border:none; 
  padding:12px; 
  border-radius:10px; 
  cursor:pointer; 
  margin-top:12px; 
  transition:0.25s ease; 
  font-size:1rem; 
  width:100%; 
  max-width:400px; 
}

.btn-book:hover, .btn-save:hover, .btn-add-photo:hover { background:var(--accent-dark); }

/* Photos grid */
.photos-grid { 
  display:grid; 
  grid-template-columns:repeat(auto-fit,minmax(100px,1fr)); 
  gap:10px; 
  margin-top:12px; 
  width:100%; 
}

.photos-grid img { 
  width:100%; 
  height:100px; 
  object-fit:cover; 
  border-radius:10px; 
  cursor:pointer; 
  transition:0.2s; 
}

.photos-grid img:hover { transform:scale(1.05); }

label { font-weight:600; margin-top:12px; display:block; }

footer { text-align:center; padding:20px; margin-top:40px; background:#fff; border-top:1px solid #ddd; font-size:0.9rem; }

/* Mobile adjustments */
@media(max-width:600px){
  .profile-header img { width:120px; height:120px; }
  .profile-info input, .profile-info textarea { font-size:0.9rem; }
  .btn-book, .btn-save, .btn-add-photo { padding:10px; font-size:0.9rem; }
  .nav-links { width:100%; justify-content:center; margin-top:8px; }
}
</style>
</head>
<body>

<div class="header">
  <div class="logo">üç≥ RACII</div>
  <div class="nav-links">
    <a href="index.html">Home</a>
    <a href="find-cook.html">Back to List</a>
  </div>
</div>

<main class="profile-container">
  <div id="profile"></div>
</main>

<footer>
  ¬© 2025 RACII ‚Äî Share food, share culture.
</footer>

<script>
// ---------- Helpers ----------
function getCookId() {
  const params = new URLSearchParams(window.location.search);
  return params.get('id');
}

function saveCooks(cooks){ localStorage.setItem('cooks', JSON.stringify(cooks)); }

function fileToBase64(file, callback){
  const reader = new FileReader();
  reader.onload = function(e){ callback(e.target.result); };
  reader.readAsDataURL(file);
}

// ---------- Load Profile ----------
function loadProfile(){
  const cookId = getCookId();
  const cooks = JSON.parse(localStorage.getItem('cooks')||'[]');
  const cook = cooks.find(c=>c.id===cookId);
  const container = document.getElementById('profile');

  if(!cook){ container.innerHTML='<p style="text-align:center; color:var(--muted)">Cook not found.</p>'; return; }

  container.innerHTML = `
    <div class="profile-header">
      <img id="profile-pic" src="${cook.profilePhoto||'https://images.unsplash.com/photo-1604908177266-2f06c3a20a8a?auto=format&fit=crop&w=800&q=80'}" alt="Cook">
      <div class="profile-info">
        <input type="text" id="cook-name" value="${cook.name}" placeholder="Name">
        <input type="text" id="cook-nationality" value="${cook.nationality}" placeholder="Nationality">
        <textarea id="cook-bio" placeholder="Short Bio">${cook.bio}</textarea>
        <label>Change Profile Picture:</label>
        <input type="file" id="profile-upload" accept="image/*">
        <button class="btn-save" onclick="saveProfile('${cookId}')">Save Profile</button>
      </div>
    </div>

    <h3>Dish Photos</h3>
    <div class="photos-grid" id="dish-photos">
      ${cook.dishPhotos.map((d,i)=>`<img src="${d}" onclick="removePhoto('${cookId}','dish',${i})">`).join('')}
    </div>
    <label>Add Dish Photo:</label>
    <input type="file" id="new-dish-photo" accept="image/*">
    <button class="btn-add-photo" onclick="addPhoto('${cookId}','dish')">Add Dish Photo</button>

    <h3 style="margin-top:18px;">Kitchen Photos</h3>
    <div class="photos-grid" id="kitchen-photos">
      ${cook.kitchenPhotos.map((k,i)=>`<img src="${k}" onclick="removePhoto('${cookId}','kitchen',${i})">`).join('')}
    </div>
    <label>Add Kitchen Photo:</label>
    <input type="file" id="new-kitchen-photo" accept="image/*">
    <button class="btn-add-photo" onclick="addPhoto('${cookId}','kitchen')">Add Kitchen Photo</button>

    <button class="btn-book" onclick="alert('Booking feature coming soon!')">Book Now</button>
  `;

  document.getElementById('profile-upload').addEventListener('change', function(){
    const file = this.files[0];
    if(file){ fileToBase64(file, base64=>document.getElementById('profile-pic').src=base64); }
  });
}

// ---------- Save Profile ----------
function saveProfile(cookId){
  const cooks = JSON.parse(localStorage.getItem('cooks')||'[]');
  const cook = cooks.find(c=>c.id===cookId);
  if(!cook) return;

  cook.name = document.getElementById('cook-name').value;
  cook.nationality = document.getElementById('cook-nationality').value;
  cook.bio = document.getElementById('cook-bio').value;

  const profileFile = document.getElementById('profile-upload').files[0];
  if(profileFile){
    fileToBase64(profileFile, base64=>{
      cook.profilePhoto = base64;
      saveCooks(cooks);
      alert('Profile saved successfully!');
      loadProfile();
    });
  } else {
    saveCooks(cooks);
    alert('Profile saved successfully!');
    loadProfile();
  }
}

// ---------- Add / Remove Photos ----------
function addPhoto(cookId,type){
  const fileInput = document.getElementById(type==='dish'?'new-dish-photo':'new-kitchen-photo');
  const file = fileInput.files[0];
  if(!file) return alert('Please select a photo');

  fileToBase64(file, base64=>{
    const cooks = JSON.parse(localStorage.getItem('cooks')||'[]');
    const cook = cooks.find(c=>c.id===cookId);
    if(!cook) return;
    if(type==='dish') cook.dishPhotos.push(base64);
    else cook.kitchenPhotos.push(base64);
    saveCooks(cooks);
    fileInput.value='';
    loadProfile();
  });
}

function removePhoto(cookId,type,index){
  if(!confirm('Remove this photo?')) return;
  const cooks = JSON.parse(localStorage.getItem('cooks')||'[]');
  const cook = cooks.find(c=>c.id===cookId);
  if(!cook) return;
  if(type==='dish') cook.dishPhotos.splice(index,1);
  else cook.kitchenPhotos.splice(index,1);
  saveCooks(cooks);
  loadProfile();
}

window.addEventListener('DOMContentLoaded', loadProfile);
</script>

</body>
</html>
