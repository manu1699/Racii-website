<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RACII ‚Äî Cook Profile</title>
<link rel="stylesheet" href="style.css">
<style>
:root {--accent:#ff6b6b; --accent-dark:#e05555; --muted:#555;}

body { font-family:'Poppins',sans-serif; margin:0; padding:0; background:#f4f4f4; }
.header { background:#fff; padding:16px 24px; display:flex; justify-content:space-between; align-items:center; box-shadow:0 2px 6px rgba(0,0,0,0.1); position:fixed; width:100%; top:0; z-index:1000; }
.header .logo { font-size:1.5rem; font-weight:700; }
.header nav a { margin-left:16px; text-decoration:none; color:#000; font-weight:600; }
.profile-container { max-width:900px; margin:100px auto 40px auto; padding:0 16px; background:#fff; border-radius:16px; box-shadow:0 4px 20px rgba(0,0,0,0.08); }
.profile-header { display:flex; flex-wrap:wrap; align-items:center; gap:20px; padding:24px; border-bottom:1px solid #ddd; }
.profile-header img { width:120px; height:120px; border-radius:12px; object-fit:cover; }
.profile-info h2 { margin:0 0 8px 0; }
.profile-info p { color:var(--muted); margin:4px 0; }
.photos-section { padding:24px; }
.photos-section h3 { margin-bottom:12px; }
.photos-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(100px,1fr)); gap:12px; }
.photos-grid img { width:100%; height:100px; object-fit:cover; border-radius:10px; }
.btn { padding:10px 16px; border:none; border-radius:10px; cursor:pointer; font-weight:600; transition:0.25s; }
.btn-primary { background:var(--accent); color:#fff; }
.btn-primary:hover { background:var(--accent-dark); }
.btn-add { background:#fff; border:1px solid var(--accent); color:var(--accent); }
.btn-add:hover { background:var(--accent); color:#fff; }

@media(max-width:768px){
  .profile-header { flex-direction:column; align-items:center; text-align:center; }
  .profile-info h2 { font-size:1.5rem; }
}
</style>
</head>
<body>

<div class="header">
  <div class="logo">üç≥ RACII</div>
  <nav>
    <a href="index.html">Home</a>
    <a href="find-cook.html">Back to List</a>
  </nav>
</div>

<main class="profile-container">
  <div id="profile"></div>
</main>

<footer style="text-align:center; padding:16px; color:#555;">¬© 2025 RACII ‚Äî Share food, share culture.</footer>

<script>
function getCookId() {
  const params = new URLSearchParams(window.location.search);
  return params.get('id');
}

function loadProfile() {
  const cookId = getCookId();
  const cooks = JSON.parse(localStorage.getItem('cooks')||'[]');
  const cook = cooks.find(c=>c.id===cookId);
  const container = document.getElementById('profile');

  if(!cook){
    container.innerHTML = '<p style="text-align:center; color:var(--muted)">Cook not found.</p>';
    return;
  }

  container.innerHTML = `
    <div class="profile-header">
      <img id="profile-photo" src="${cook.dishPhotos[0] || 'https://images.unsplash.com/photo-1604908177266-2f06c3a20a8a?auto=format&fit=crop&w=800&q=80'}" alt="Cook">
      <div class="profile-info">
        <h2>${cook.name}</h2>
        <p>Nationality: ${cook.nationality}</p>
        <p>Short Bio: ${cook.bio}</p>
      </div>
    </div>

    <div class="photos-section">
      <h3>Dish Photos</h3>
      <div class="photos-grid" id="dish-photos">
        ${cook.dishPhotos.map(d=>`<div style="position:relative;"><img src="${d}"><button onclick="removeDishPhoto('${d}')" style="position:absolute;top:4px;right:4px;padding:2px 6px;font-size:0.8rem;border:none;border-radius:4px;background:red;color:#fff;cursor:pointer;">x</button></div>`).join('')}
      </div>
      <input type="file" id="dish-upload" accept="image/*" multiple style="margin-top:12px;">
      <button class="btn btn-add" onclick="addDishPhotos()">Add Dish Photo</button>
    </div>

    <div class="photos-section">
      <h3>Kitchen Photos</h3>
      <div class="photos-grid" id="kitchen-photos">
        ${cook.kitchenPhotos.map(k=>`<img src="${k}">`).join('')}
      </div>
      <input type="file" id="kitchen-upload" accept="image/*" multiple style="margin-top:12px;">
      <button class="btn btn-add" onclick="addKitchenPhotos()">Add Kitchen Photo</button>
    </div>
  `;
}

// Dish photo functions
function addDishPhotos() {
  const cookId = getCookId();
  const cooks = JSON.parse(localStorage.getItem('cooks')||'[]');
  const cook = cooks.find(c=>c.id===cookId);
  const files = document.getElementById('dish-upload').files;
  if(!files.length) return alert('Select images first!');
  Array.from(files).forEach(f=>{
    const reader = new FileReader();
    reader.onload = e=>{
      cook.dishPhotos.push(e.target.result);
      localStorage.setItem('cooks', JSON.stringify(cooks));
      loadProfile();
    };
    reader.readAsDataURL(f);
  });
}

function removeDishPhoto(url) {
  const cookId = getCookId();
  const cooks = JSON.parse(localStorage.getItem('cooks')||'[]');
  const cook = cooks.find(c=>c.id===cookId);
  cook.dishPhotos = cook.dishPhotos.filter(d=>d!==url);
  localStorage.setItem('cooks', JSON.stringify(cooks));
  loadProfile();
}

// Kitchen photo functions
function addKitchenPhotos() {
  const cookId = getCookId();
  const cooks = JSON.parse(localStorage.getItem('cooks')||'[]');
  const cook = cooks.find(c=>c.id===cookId);
  const files = document.getElementById('kitchen-upload').files;
  if(!files.length) return alert('Select images first!');
  Array.from(files).forEach(f=>{
    const reader = new FileReader();
    reader.onload = e=>{
      cook.kitchenPhotos.push(e.target.result);
      localStorage.setItem('cooks', JSON.stringify(cooks));
      loadProfile();
    };
    reader.readAsDataURL(f);
  });
}

window.addEventListener('DOMContentLoaded', loadProfile);
</script>

</body>
</html>
